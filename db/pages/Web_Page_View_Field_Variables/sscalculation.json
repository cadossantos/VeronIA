{
  "url": "https://wiki.smartsimple.com/wiki/Sscalculation",
  "title": "Sscalculation",
  "content": "From SmartWiki\n Jump to: \nnavigation\n, \nsearch\nThis feature uses \nMariaDB\n syntax\nSscalculation is a \nvariable\n syntax for:\n \nWeb Page Views\n \nStore Value - System Variables\n \nRead Only - System Variables\nThis works similar to \nsslogic\n but will do calculations based on the formula you provide. It works as follows:\n<!--@sscalculation('@field@'*0.05)-->\nThis will return the computed value of '@field@'*0.05 and replaces the sscalculation tag.\nThis way you can do calculations right on the \nweb page views\n without having to use JavaScript. This resolves issues with creating PDF files from \nweb page views\n that contain JavaScript.\nThe \"sscalculation\" method uses MySQL syntax. Any MySQL function such as concat(...), format(...), round(...), can be used.\nContents\n1\n \nUsing sscalculation in a List\n2\n \nUsing sscalculation to Change Date Formats of Data in Custom Fields\n3\n \nUsing sscalculation to replace text\n4\n \nSee Also\nUsing sscalculation in a List\nTo obtain a Sum (for example) of the values in a \nCustom Field\n for all transactions associated with a Company/Contact using \nsscalculation\n:\n<!--@sscalculation( [#(?object=transaction)$add this$+#]0)-->\n \nImportant:\n There \nmust\n be a space prior to the opening square bracket.\n Also: if you are finding the sum don't forget the zero at the end of the statement. For example, if there are transactions with values of 10, 15 and 20 the statement between the square brackets would be translated as follows:\n[#(?object=transaction)$add this$+#]\n     becomes     \n10+15+20+\nso the 0 at the end ensures that the statement evaluated doesn't end with a plus sign (which will fail).\n If you need to pull information from the level 1 when you are at level 2 within the sscalculation tag, you can use the \nparent\n keyword\n<!--@sscalculation(date_format(\"@parent.fullstartdate@\",\"%Y\"))-->\nNote:\n When using date_format with a standard date field you must refer to the field using either @datetime(parent.startdate)@ or @parent.fullstartdate@\n To sum a value on a \nCompany Role\n field (Custom Field ID 123456) for all companies with the role of \nFunding Agency\n AND a value stored on the level 1 (Custom Field ID 545454) and format it with no decimal places:\n<!--@sscalculation(format(( [#(?object=company::criteria=rolename='Funding Agency') $?opc_123456.value$ + #] @#545454.value#@),0))-->\n To find the average of all values (Custom Field ID 1755555) on a particular Level 2 Type (typeid=54321), excluding a particular status (\nstatusid\n is not 10001), rounded to the nearest whole number:\n<!--@sscalculation(format( ( [#(?object=activity::criteria=typeid='54321' and status.statusid not in ('10001')) $1755555$ + #] 0 )/@level2.count(*):typeid='54321' and status.statusid not in ('10001')@,0))--> \n To find the different in days between two different dates:\n<!--@sscalculation(datediff('@datetime(currentdate)@','@Last Contact Date@'))-->\n To add a number of months to a date equal to the number selected in another field: \n<!--@sscalculation(DATE_ADD('@Anticipated Project End Date@', INTERVAL @system.Grants-FinalDisbursementDelay@ MONTH))-->\n To subtract a number of months to a date you use a negative number for the INTERVAL (for example -6 months below): \n<!--@sscalculation(DATE_ADD('@Anticipated Project End Date@', INTERVAL -6 MONTH))-->\n To calculate the difference in months between two date values: \n<!--@sscalculation(PERIOD_DIFF(DATE_FORMAT('@Anticipated Project End Date@','%Y%m'),DATE_FORMAT('@Anticipated Project Start Date@','%Y%m')))-->\nor\n<!--@sscalculation(TIMESTAMPDIFF( MONTH,'@Start Date.value@','@End Date.value@') )-->\nUsing sscalculation to Change Date Formats of Data in Custom Fields\n To parse out date/time information from a custom field and display it in a different format, you can use the following syntax on level 2, referencing the field \nfieldname\n on level 1:\n<!--@sscalculation(date_format(\"@parent.fieldname@\",\"%M %d, %Y\"))-->\n Use the following arguments to format the date/time information:\nFormat\nDescription\n%M %d, %Y\nwill return date in format of \nSeptember 30, 2012\n%a\nwill return the truncated day of the week, e.g. \nSun.\n for Sunday\n%b\nwill return the truncated name of the month, e.g. \nSep\n for September\n%c\nwill return the month number in short format, e.g. \n9\n for September\n%d\nwill return the numeric day of month (\n01-31\n)\n%e\nwill return the numeric day of month (\n1-31\n)\n%h\nwill return hour (\n01-12\n)\n%i\nwill return minutes (\n00-59\n)\n%j\nwill return day of year (\n001-366\n)\n%k\nwill return hour (\n0-23\n)\n%l\nwill return hour (\n1-12\n)\n%m\nwill return the month number, e.g. \n09\n for September\n%p\nwill return AM/PM information, e.g. \nAM\n%r\nwill return the full time in 12-hour format, e.g. \n12:00:00 AM\n%s\nwill return seconds (\n00-59\n)\n%u\nwill return the week number (\n00-53\n) where Monday is the first day of the week\n%w\nday of the week (\n0\n=Sunday...\n6\n=Saturday)\n%y\nwill return the truncated year, e.g. \n12\n for 2012\n%D\nwill return the month ordinal, e.g. \n30th\n%H\nwill return hour (\n00-23\n)\n%M\nwill return the month name, e.g. \nSeptember\n%T\nwill return the full time in 24-hour format, e.g. \n23:00:00\n%U\nwill return the week number (\n00-53\n) where Sunday is the first day of the week\n%W\nwill return the day of the week, e.g. \nSunday\n%Y\nwill return the four-digit year, e.g. \n2013\nNote\n: Any MYSQL syntax can be used within sscalculation. See \nhere\n for additional date/time formatting options. (Note: this is an external website.)\n It is not necessary to use sscalculation if the custom field being referenced is on the same level as the field referencing it. For example, if you are referencing a level 2 custom field in a web page view field on level 2. In this case, you can use the syntax outlined on the \nWeb Page View Field Variables\n page.\nUsing sscalculation to replace text\nIn the following example, the variable \n@Select Many Checkbox Fields@\n returns a semicolon-separated list of selected values from the field:\nOption 1;Option 2;Option 3\nIn order to replace the semicolons with a comma, followed by a space, you can use the following syntax:\n<!--@sscalculation(REPLACE(\"@Select Many Checkbox Field@\",\";\",\", \"))-->\n...which will return:\nOption 1, Option 2, Option 3\nSee Also\n \nMYSQL Date Format\n Note: this is an external website.\n \n Retrieved from ‘\nhttps://wiki.smartsimple.com/index.php?title=Sscalculation&oldid=25168\n’ \nCategories\n: \nVariables\nDate Formats",
  "links": [
    "https://wiki.smartsimple.com/wiki/Variables",
    "https://wiki.smartsimple.com/wiki/Web_Page_View_Field",
    "https://wiki.smartsimple.com/wiki/Sslogic",
    "https://wiki.smartsimple.com/wiki/Web_Page_View_Field",
    "https://wiki.smartsimple.com/wiki/Web_Page_View_Field",
    "https://wiki.smartsimple.com/wiki/Custom_Field",
    "https://wiki.smartsimple.com/wiki/Company_Role",
    "https://wiki.smartsimple.com/wiki/Statusid",
    "https://wiki.smartsimple.com/wiki/Web_Page_View_Field_Variables#Custom_Fields_Date.2FTime"
  ],
  "images": []
}